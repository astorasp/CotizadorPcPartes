<?xml version="1.0" encoding="UTF-8"?>
<testsuite xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="https://maven.apache.org/surefire/maven-surefire-plugin/xsd/surefire-test-report.xsd" version="3.0.2" name="mx.com.qtx.seguridad.security.SpringSecurityConfigurationTest" time="3.467" tests="18" errors="0" skipped="0" failures="0">
  <properties>
    <property name="java.specification.version" value="21"/>
    <property name="sun.jnu.encoding" value="UTF-8"/>
    <property name="java.class.path" value="/home/usuario/Asp/github repositorios/curso/CotizadorPcPartes/ms-seguridad/target/test-classes:/home/usuario/Asp/github repositorios/curso/CotizadorPcPartes/ms-seguridad/target/classes:/home/usuario/.m2/repository/org/springframework/boot/spring-boot-starter-web/3.5.3/spring-boot-starter-web-3.5.3.jar:/home/usuario/.m2/repository/org/springframework/boot/spring-boot-starter/3.5.3/spring-boot-starter-3.5.3.jar:/home/usuario/.m2/repository/org/springframework/boot/spring-boot/3.5.3/spring-boot-3.5.3.jar:/home/usuario/.m2/repository/org/springframework/boot/spring-boot-starter-logging/3.5.3/spring-boot-starter-logging-3.5.3.jar:/home/usuario/.m2/repository/ch/qos/logback/logback-classic/1.5.18/logback-classic-1.5.18.jar:/home/usuario/.m2/repository/ch/qos/logback/logback-core/1.5.18/logback-core-1.5.18.jar:/home/usuario/.m2/repository/org/apache/logging/log4j/log4j-to-slf4j/2.24.3/log4j-to-slf4j-2.24.3.jar:/home/usuario/.m2/repository/org/apache/logging/log4j/log4j-api/2.24.3/log4j-api-2.24.3.jar:/home/usuario/.m2/repository/org/slf4j/jul-to-slf4j/2.0.17/jul-to-slf4j-2.0.17.jar:/home/usuario/.m2/repository/jakarta/annotation/jakarta.annotation-api/2.1.1/jakarta.annotation-api-2.1.1.jar:/home/usuario/.m2/repository/org/yaml/snakeyaml/2.4/snakeyaml-2.4.jar:/home/usuario/.m2/repository/org/springframework/boot/spring-boot-starter-json/3.5.3/spring-boot-starter-json-3.5.3.jar:/home/usuario/.m2/repository/com/fasterxml/jackson/datatype/jackson-datatype-jdk8/2.19.1/jackson-datatype-jdk8-2.19.1.jar:/home/usuario/.m2/repository/com/fasterxml/jackson/datatype/jackson-datatype-jsr310/2.19.1/jackson-datatype-jsr310-2.19.1.jar:/home/usuario/.m2/repository/com/fasterxml/jackson/module/jackson-module-parameter-names/2.19.1/jackson-module-parameter-names-2.19.1.jar:/home/usuario/.m2/repository/org/springframework/boot/spring-boot-starter-tomcat/3.5.3/spring-boot-starter-tomcat-3.5.3.jar:/home/usuario/.m2/repository/org/apache/tomcat/embed/tomcat-embed-core/10.1.42/tomcat-embed-core-10.1.42.jar:/home/usuario/.m2/repository/org/apache/tomcat/embed/tomcat-embed-websocket/10.1.42/tomcat-embed-websocket-10.1.42.jar:/home/usuario/.m2/repository/org/springframework/spring-web/6.2.8/spring-web-6.2.8.jar:/home/usuario/.m2/repository/org/springframework/spring-beans/6.2.8/spring-beans-6.2.8.jar:/home/usuario/.m2/repository/org/springframework/spring-webmvc/6.2.8/spring-webmvc-6.2.8.jar:/home/usuario/.m2/repository/org/springframework/spring-context/6.2.8/spring-context-6.2.8.jar:/home/usuario/.m2/repository/org/springframework/spring-expression/6.2.8/spring-expression-6.2.8.jar:/home/usuario/.m2/repository/org/springframework/boot/spring-boot-starter-data-jpa/3.5.3/spring-boot-starter-data-jpa-3.5.3.jar:/home/usuario/.m2/repository/org/springframework/boot/spring-boot-starter-jdbc/3.5.3/spring-boot-starter-jdbc-3.5.3.jar:/home/usuario/.m2/repository/com/zaxxer/HikariCP/6.3.0/HikariCP-6.3.0.jar:/home/usuario/.m2/repository/org/springframework/spring-jdbc/6.2.8/spring-jdbc-6.2.8.jar:/home/usuario/.m2/repository/org/hibernate/orm/hibernate-core/6.6.18.Final/hibernate-core-6.6.18.Final.jar:/home/usuario/.m2/repository/jakarta/persistence/jakarta.persistence-api/3.1.0/jakarta.persistence-api-3.1.0.jar:/home/usuario/.m2/repository/jakarta/transaction/jakarta.transaction-api/2.0.1/jakarta.transaction-api-2.0.1.jar:/home/usuario/.m2/repository/org/jboss/logging/jboss-logging/3.6.1.Final/jboss-logging-3.6.1.Final.jar:/home/usuario/.m2/repository/org/hibernate/common/hibernate-commons-annotations/7.0.3.Final/hibernate-commons-annotations-7.0.3.Final.jar:/home/usuario/.m2/repository/io/smallrye/jandex/3.2.0/jandex-3.2.0.jar:/home/usuario/.m2/repository/com/fasterxml/classmate/1.7.0/classmate-1.7.0.jar:/home/usuario/.m2/repository/net/bytebuddy/byte-buddy/1.17.6/byte-buddy-1.17.6.jar:/home/usuario/.m2/repository/org/glassfish/jaxb/jaxb-runtime/4.0.5/jaxb-runtime-4.0.5.jar:/home/usuario/.m2/repository/org/glassfish/jaxb/jaxb-core/4.0.5/jaxb-core-4.0.5.jar:/home/usuario/.m2/repository/org/eclipse/angus/angus-activation/2.0.2/angus-activation-2.0.2.jar:/home/usuario/.m2/repository/org/glassfish/jaxb/txw2/4.0.5/txw2-4.0.5.jar:/home/usuario/.m2/repository/com/sun/istack/istack-commons-runtime/4.1.2/istack-commons-runtime-4.1.2.jar:/home/usuario/.m2/repository/jakarta/inject/jakarta.inject-api/2.0.1/jakarta.inject-api-2.0.1.jar:/home/usuario/.m2/repository/org/antlr/antlr4-runtime/4.13.0/antlr4-runtime-4.13.0.jar:/home/usuario/.m2/repository/org/springframework/data/spring-data-jpa/3.5.1/spring-data-jpa-3.5.1.jar:/home/usuario/.m2/repository/org/springframework/data/spring-data-commons/3.5.1/spring-data-commons-3.5.1.jar:/home/usuario/.m2/repository/org/springframework/spring-orm/6.2.8/spring-orm-6.2.8.jar:/home/usuario/.m2/repository/org/springframework/spring-tx/6.2.8/spring-tx-6.2.8.jar:/home/usuario/.m2/repository/org/slf4j/slf4j-api/2.0.17/slf4j-api-2.0.17.jar:/home/usuario/.m2/repository/org/springframework/spring-aspects/6.2.8/spring-aspects-6.2.8.jar:/home/usuario/.m2/repository/org/aspectj/aspectjweaver/1.9.24/aspectjweaver-1.9.24.jar:/home/usuario/.m2/repository/org/springframework/boot/spring-boot-starter-security/3.5.3/spring-boot-starter-security-3.5.3.jar:/home/usuario/.m2/repository/org/springframework/spring-aop/6.2.8/spring-aop-6.2.8.jar:/home/usuario/.m2/repository/org/springframework/security/spring-security-config/6.5.1/spring-security-config-6.5.1.jar:/home/usuario/.m2/repository/org/springframework/security/spring-security-web/6.5.1/spring-security-web-6.5.1.jar:/home/usuario/.m2/repository/org/springframework/boot/spring-boot-starter-validation/3.5.3/spring-boot-starter-validation-3.5.3.jar:/home/usuario/.m2/repository/org/apache/tomcat/embed/tomcat-embed-el/10.1.42/tomcat-embed-el-10.1.42.jar:/home/usuario/.m2/repository/org/hibernate/validator/hibernate-validator/8.0.2.Final/hibernate-validator-8.0.2.Final.jar:/home/usuario/.m2/repository/jakarta/validation/jakarta.validation-api/3.0.2/jakarta.validation-api-3.0.2.jar:/home/usuario/.m2/repository/org/springframework/boot/spring-boot-starter-actuator/3.5.3/spring-boot-starter-actuator-3.5.3.jar:/home/usuario/.m2/repository/org/springframework/boot/spring-boot-actuator-autoconfigure/3.5.3/spring-boot-actuator-autoconfigure-3.5.3.jar:/home/usuario/.m2/repository/org/springframework/boot/spring-boot-actuator/3.5.3/spring-boot-actuator-3.5.3.jar:/home/usuario/.m2/repository/io/micrometer/micrometer-observation/1.15.1/micrometer-observation-1.15.1.jar:/home/usuario/.m2/repository/io/micrometer/micrometer-commons/1.15.1/micrometer-commons-1.15.1.jar:/home/usuario/.m2/repository/io/micrometer/micrometer-jakarta9/1.15.1/micrometer-jakarta9-1.15.1.jar:/home/usuario/.m2/repository/io/micrometer/micrometer-core/1.15.1/micrometer-core-1.15.1.jar:/home/usuario/.m2/repository/org/hdrhistogram/HdrHistogram/2.2.2/HdrHistogram-2.2.2.jar:/home/usuario/.m2/repository/org/latencyutils/LatencyUtils/2.0.3/LatencyUtils-2.0.3.jar:/home/usuario/.m2/repository/io/jsonwebtoken/jjwt-api/0.12.3/jjwt-api-0.12.3.jar:/home/usuario/.m2/repository/io/jsonwebtoken/jjwt-impl/0.12.3/jjwt-impl-0.12.3.jar:/home/usuario/.m2/repository/io/jsonwebtoken/jjwt-jackson/0.12.3/jjwt-jackson-0.12.3.jar:/home/usuario/.m2/repository/com/fasterxml/jackson/core/jackson-databind/2.19.1/jackson-databind-2.19.1.jar:/home/usuario/.m2/repository/com/fasterxml/jackson/core/jackson-annotations/2.19.1/jackson-annotations-2.19.1.jar:/home/usuario/.m2/repository/com/fasterxml/jackson/core/jackson-core/2.19.1/jackson-core-2.19.1.jar:/home/usuario/.m2/repository/com/mysql/mysql-connector-j/9.2.0/mysql-connector-j-9.2.0.jar:/home/usuario/.m2/repository/org/springframework/boot/spring-boot-starter-test/3.5.3/spring-boot-starter-test-3.5.3.jar:/home/usuario/.m2/repository/org/springframework/boot/spring-boot-test/3.5.3/spring-boot-test-3.5.3.jar:/home/usuario/.m2/repository/org/springframework/boot/spring-boot-test-autoconfigure/3.5.3/spring-boot-test-autoconfigure-3.5.3.jar:/home/usuario/.m2/repository/com/jayway/jsonpath/json-path/2.9.0/json-path-2.9.0.jar:/home/usuario/.m2/repository/jakarta/xml/bind/jakarta.xml.bind-api/4.0.2/jakarta.xml.bind-api-4.0.2.jar:/home/usuario/.m2/repository/jakarta/activation/jakarta.activation-api/2.1.3/jakarta.activation-api-2.1.3.jar:/home/usuario/.m2/repository/net/minidev/json-smart/2.5.2/json-smart-2.5.2.jar:/home/usuario/.m2/repository/net/minidev/accessors-smart/2.5.2/accessors-smart-2.5.2.jar:/home/usuario/.m2/repository/org/ow2/asm/asm/9.7.1/asm-9.7.1.jar:/home/usuario/.m2/repository/org/assertj/assertj-core/3.27.3/assertj-core-3.27.3.jar:/home/usuario/.m2/repository/org/awaitility/awaitility/4.2.2/awaitility-4.2.2.jar:/home/usuario/.m2/repository/org/hamcrest/hamcrest/3.0/hamcrest-3.0.jar:/home/usuario/.m2/repository/org/junit/jupiter/junit-jupiter/5.12.2/junit-jupiter-5.12.2.jar:/home/usuario/.m2/repository/org/junit/jupiter/junit-jupiter-api/5.12.2/junit-jupiter-api-5.12.2.jar:/home/usuario/.m2/repository/org/opentest4j/opentest4j/1.3.0/opentest4j-1.3.0.jar:/home/usuario/.m2/repository/org/junit/platform/junit-platform-commons/1.12.2/junit-platform-commons-1.12.2.jar:/home/usuario/.m2/repository/org/apiguardian/apiguardian-api/1.1.2/apiguardian-api-1.1.2.jar:/home/usuario/.m2/repository/org/junit/jupiter/junit-jupiter-params/5.12.2/junit-jupiter-params-5.12.2.jar:/home/usuario/.m2/repository/org/junit/jupiter/junit-jupiter-engine/5.12.2/junit-jupiter-engine-5.12.2.jar:/home/usuario/.m2/repository/org/junit/platform/junit-platform-engine/1.12.2/junit-platform-engine-1.12.2.jar:/home/usuario/.m2/repository/org/mockito/mockito-core/5.17.0/mockito-core-5.17.0.jar:/home/usuario/.m2/repository/net/bytebuddy/byte-buddy-agent/1.17.6/byte-buddy-agent-1.17.6.jar:/home/usuario/.m2/repository/org/objenesis/objenesis/3.3/objenesis-3.3.jar:/home/usuario/.m2/repository/org/mockito/mockito-junit-jupiter/5.17.0/mockito-junit-jupiter-5.17.0.jar:/home/usuario/.m2/repository/org/skyscreamer/jsonassert/1.5.3/jsonassert-1.5.3.jar:/home/usuario/.m2/repository/com/vaadin/external/google/android-json/0.0.20131108.vaadin1/android-json-0.0.20131108.vaadin1.jar:/home/usuario/.m2/repository/org/springframework/spring-core/6.2.8/spring-core-6.2.8.jar:/home/usuario/.m2/repository/org/springframework/spring-jcl/6.2.8/spring-jcl-6.2.8.jar:/home/usuario/.m2/repository/org/springframework/spring-test/6.2.8/spring-test-6.2.8.jar:/home/usuario/.m2/repository/org/xmlunit/xmlunit-core/2.10.2/xmlunit-core-2.10.2.jar:/home/usuario/.m2/repository/org/springframework/security/spring-security-test/6.5.1/spring-security-test-6.5.1.jar:/home/usuario/.m2/repository/org/springframework/security/spring-security-core/6.5.1/spring-security-core-6.5.1.jar:/home/usuario/.m2/repository/org/springframework/security/spring-security-crypto/6.5.1/spring-security-crypto-6.5.1.jar:/home/usuario/.m2/repository/org/testcontainers/mysql/1.21.1/mysql-1.21.1.jar:/home/usuario/.m2/repository/org/testcontainers/jdbc/1.21.1/jdbc-1.21.1.jar:/home/usuario/.m2/repository/org/testcontainers/database-commons/1.21.1/database-commons-1.21.1.jar:/home/usuario/.m2/repository/org/testcontainers/junit-jupiter/1.21.1/junit-jupiter-1.21.1.jar:/home/usuario/.m2/repository/org/testcontainers/testcontainers/1.21.1/testcontainers-1.21.1.jar:/home/usuario/.m2/repository/junit/junit/4.13.2/junit-4.13.2.jar:/home/usuario/.m2/repository/org/hamcrest/hamcrest-core/3.0/hamcrest-core-3.0.jar:/home/usuario/.m2/repository/org/apache/commons/commons-compress/1.24.0/commons-compress-1.24.0.jar:/home/usuario/.m2/repository/org/rnorth/duct-tape/duct-tape/1.0.8/duct-tape-1.0.8.jar:/home/usuario/.m2/repository/org/jetbrains/annotations/17.0.0/annotations-17.0.0.jar:/home/usuario/.m2/repository/com/github/docker-java/docker-java-api/3.4.2/docker-java-api-3.4.2.jar:/home/usuario/.m2/repository/com/github/docker-java/docker-java-transport-zerodep/3.4.2/docker-java-transport-zerodep-3.4.2.jar:/home/usuario/.m2/repository/com/github/docker-java/docker-java-transport/3.4.2/docker-java-transport-3.4.2.jar:/home/usuario/.m2/repository/net/java/dev/jna/jna/5.13.0/jna-5.13.0.jar:/home/usuario/.m2/repository/org/springframework/boot/spring-boot-testcontainers/3.5.3/spring-boot-testcontainers-3.5.3.jar:/home/usuario/.m2/repository/org/springframework/boot/spring-boot-autoconfigure/3.5.3/spring-boot-autoconfigure-3.5.3.jar:"/>
    <property name="java.vm.vendor" value="Eclipse Adoptium"/>
    <property name="sun.arch.data.model" value="64"/>
    <property name="java.vendor.url" value="https://adoptium.net/"/>
    <property name="catalina.useNaming" value="false"/>
    <property name="user.timezone" value="America/Mazatlan"/>
    <property name="org.jboss.logging.provider" value="slf4j"/>
    <property name="os.name" value="Linux"/>
    <property name="java.vm.specification.version" value="21"/>
    <property name="APPLICATION_NAME" value="ms-seguridad-test"/>
    <property name="user.country" value="US"/>
    <property name="sun.java.launcher" value="SUN_STANDARD"/>
    <property name="sun.boot.library.path" value="/usr/local/java/lib"/>
    <property name="sun.java.command" value="/home/usuario/Asp/github repositorios/curso/CotizadorPcPartes/ms-seguridad/target/surefire/surefirebooter-20250702170946275_3.jar /home/usuario/Asp/github repositorios/curso/CotizadorPcPartes/ms-seguridad/target/surefire 2025-07-02T17-09-46_185-jvmRun1 surefire-20250702170946275_1tmp surefire_0-20250702170946275_2tmp"/>
    <property name="jdk.debug" value="release"/>
    <property name="surefire.test.class.path" value="/home/usuario/Asp/github repositorios/curso/CotizadorPcPartes/ms-seguridad/target/test-classes:/home/usuario/Asp/github repositorios/curso/CotizadorPcPartes/ms-seguridad/target/classes:/home/usuario/.m2/repository/org/springframework/boot/spring-boot-starter-web/3.5.3/spring-boot-starter-web-3.5.3.jar:/home/usuario/.m2/repository/org/springframework/boot/spring-boot-starter/3.5.3/spring-boot-starter-3.5.3.jar:/home/usuario/.m2/repository/org/springframework/boot/spring-boot/3.5.3/spring-boot-3.5.3.jar:/home/usuario/.m2/repository/org/springframework/boot/spring-boot-starter-logging/3.5.3/spring-boot-starter-logging-3.5.3.jar:/home/usuario/.m2/repository/ch/qos/logback/logback-classic/1.5.18/logback-classic-1.5.18.jar:/home/usuario/.m2/repository/ch/qos/logback/logback-core/1.5.18/logback-core-1.5.18.jar:/home/usuario/.m2/repository/org/apache/logging/log4j/log4j-to-slf4j/2.24.3/log4j-to-slf4j-2.24.3.jar:/home/usuario/.m2/repository/org/apache/logging/log4j/log4j-api/2.24.3/log4j-api-2.24.3.jar:/home/usuario/.m2/repository/org/slf4j/jul-to-slf4j/2.0.17/jul-to-slf4j-2.0.17.jar:/home/usuario/.m2/repository/jakarta/annotation/jakarta.annotation-api/2.1.1/jakarta.annotation-api-2.1.1.jar:/home/usuario/.m2/repository/org/yaml/snakeyaml/2.4/snakeyaml-2.4.jar:/home/usuario/.m2/repository/org/springframework/boot/spring-boot-starter-json/3.5.3/spring-boot-starter-json-3.5.3.jar:/home/usuario/.m2/repository/com/fasterxml/jackson/datatype/jackson-datatype-jdk8/2.19.1/jackson-datatype-jdk8-2.19.1.jar:/home/usuario/.m2/repository/com/fasterxml/jackson/datatype/jackson-datatype-jsr310/2.19.1/jackson-datatype-jsr310-2.19.1.jar:/home/usuario/.m2/repository/com/fasterxml/jackson/module/jackson-module-parameter-names/2.19.1/jackson-module-parameter-names-2.19.1.jar:/home/usuario/.m2/repository/org/springframework/boot/spring-boot-starter-tomcat/3.5.3/spring-boot-starter-tomcat-3.5.3.jar:/home/usuario/.m2/repository/org/apache/tomcat/embed/tomcat-embed-core/10.1.42/tomcat-embed-core-10.1.42.jar:/home/usuario/.m2/repository/org/apache/tomcat/embed/tomcat-embed-websocket/10.1.42/tomcat-embed-websocket-10.1.42.jar:/home/usuario/.m2/repository/org/springframework/spring-web/6.2.8/spring-web-6.2.8.jar:/home/usuario/.m2/repository/org/springframework/spring-beans/6.2.8/spring-beans-6.2.8.jar:/home/usuario/.m2/repository/org/springframework/spring-webmvc/6.2.8/spring-webmvc-6.2.8.jar:/home/usuario/.m2/repository/org/springframework/spring-context/6.2.8/spring-context-6.2.8.jar:/home/usuario/.m2/repository/org/springframework/spring-expression/6.2.8/spring-expression-6.2.8.jar:/home/usuario/.m2/repository/org/springframework/boot/spring-boot-starter-data-jpa/3.5.3/spring-boot-starter-data-jpa-3.5.3.jar:/home/usuario/.m2/repository/org/springframework/boot/spring-boot-starter-jdbc/3.5.3/spring-boot-starter-jdbc-3.5.3.jar:/home/usuario/.m2/repository/com/zaxxer/HikariCP/6.3.0/HikariCP-6.3.0.jar:/home/usuario/.m2/repository/org/springframework/spring-jdbc/6.2.8/spring-jdbc-6.2.8.jar:/home/usuario/.m2/repository/org/hibernate/orm/hibernate-core/6.6.18.Final/hibernate-core-6.6.18.Final.jar:/home/usuario/.m2/repository/jakarta/persistence/jakarta.persistence-api/3.1.0/jakarta.persistence-api-3.1.0.jar:/home/usuario/.m2/repository/jakarta/transaction/jakarta.transaction-api/2.0.1/jakarta.transaction-api-2.0.1.jar:/home/usuario/.m2/repository/org/jboss/logging/jboss-logging/3.6.1.Final/jboss-logging-3.6.1.Final.jar:/home/usuario/.m2/repository/org/hibernate/common/hibernate-commons-annotations/7.0.3.Final/hibernate-commons-annotations-7.0.3.Final.jar:/home/usuario/.m2/repository/io/smallrye/jandex/3.2.0/jandex-3.2.0.jar:/home/usuario/.m2/repository/com/fasterxml/classmate/1.7.0/classmate-1.7.0.jar:/home/usuario/.m2/repository/net/bytebuddy/byte-buddy/1.17.6/byte-buddy-1.17.6.jar:/home/usuario/.m2/repository/org/glassfish/jaxb/jaxb-runtime/4.0.5/jaxb-runtime-4.0.5.jar:/home/usuario/.m2/repository/org/glassfish/jaxb/jaxb-core/4.0.5/jaxb-core-4.0.5.jar:/home/usuario/.m2/repository/org/eclipse/angus/angus-activation/2.0.2/angus-activation-2.0.2.jar:/home/usuario/.m2/repository/org/glassfish/jaxb/txw2/4.0.5/txw2-4.0.5.jar:/home/usuario/.m2/repository/com/sun/istack/istack-commons-runtime/4.1.2/istack-commons-runtime-4.1.2.jar:/home/usuario/.m2/repository/jakarta/inject/jakarta.inject-api/2.0.1/jakarta.inject-api-2.0.1.jar:/home/usuario/.m2/repository/org/antlr/antlr4-runtime/4.13.0/antlr4-runtime-4.13.0.jar:/home/usuario/.m2/repository/org/springframework/data/spring-data-jpa/3.5.1/spring-data-jpa-3.5.1.jar:/home/usuario/.m2/repository/org/springframework/data/spring-data-commons/3.5.1/spring-data-commons-3.5.1.jar:/home/usuario/.m2/repository/org/springframework/spring-orm/6.2.8/spring-orm-6.2.8.jar:/home/usuario/.m2/repository/org/springframework/spring-tx/6.2.8/spring-tx-6.2.8.jar:/home/usuario/.m2/repository/org/slf4j/slf4j-api/2.0.17/slf4j-api-2.0.17.jar:/home/usuario/.m2/repository/org/springframework/spring-aspects/6.2.8/spring-aspects-6.2.8.jar:/home/usuario/.m2/repository/org/aspectj/aspectjweaver/1.9.24/aspectjweaver-1.9.24.jar:/home/usuario/.m2/repository/org/springframework/boot/spring-boot-starter-security/3.5.3/spring-boot-starter-security-3.5.3.jar:/home/usuario/.m2/repository/org/springframework/spring-aop/6.2.8/spring-aop-6.2.8.jar:/home/usuario/.m2/repository/org/springframework/security/spring-security-config/6.5.1/spring-security-config-6.5.1.jar:/home/usuario/.m2/repository/org/springframework/security/spring-security-web/6.5.1/spring-security-web-6.5.1.jar:/home/usuario/.m2/repository/org/springframework/boot/spring-boot-starter-validation/3.5.3/spring-boot-starter-validation-3.5.3.jar:/home/usuario/.m2/repository/org/apache/tomcat/embed/tomcat-embed-el/10.1.42/tomcat-embed-el-10.1.42.jar:/home/usuario/.m2/repository/org/hibernate/validator/hibernate-validator/8.0.2.Final/hibernate-validator-8.0.2.Final.jar:/home/usuario/.m2/repository/jakarta/validation/jakarta.validation-api/3.0.2/jakarta.validation-api-3.0.2.jar:/home/usuario/.m2/repository/org/springframework/boot/spring-boot-starter-actuator/3.5.3/spring-boot-starter-actuator-3.5.3.jar:/home/usuario/.m2/repository/org/springframework/boot/spring-boot-actuator-autoconfigure/3.5.3/spring-boot-actuator-autoconfigure-3.5.3.jar:/home/usuario/.m2/repository/org/springframework/boot/spring-boot-actuator/3.5.3/spring-boot-actuator-3.5.3.jar:/home/usuario/.m2/repository/io/micrometer/micrometer-observation/1.15.1/micrometer-observation-1.15.1.jar:/home/usuario/.m2/repository/io/micrometer/micrometer-commons/1.15.1/micrometer-commons-1.15.1.jar:/home/usuario/.m2/repository/io/micrometer/micrometer-jakarta9/1.15.1/micrometer-jakarta9-1.15.1.jar:/home/usuario/.m2/repository/io/micrometer/micrometer-core/1.15.1/micrometer-core-1.15.1.jar:/home/usuario/.m2/repository/org/hdrhistogram/HdrHistogram/2.2.2/HdrHistogram-2.2.2.jar:/home/usuario/.m2/repository/org/latencyutils/LatencyUtils/2.0.3/LatencyUtils-2.0.3.jar:/home/usuario/.m2/repository/io/jsonwebtoken/jjwt-api/0.12.3/jjwt-api-0.12.3.jar:/home/usuario/.m2/repository/io/jsonwebtoken/jjwt-impl/0.12.3/jjwt-impl-0.12.3.jar:/home/usuario/.m2/repository/io/jsonwebtoken/jjwt-jackson/0.12.3/jjwt-jackson-0.12.3.jar:/home/usuario/.m2/repository/com/fasterxml/jackson/core/jackson-databind/2.19.1/jackson-databind-2.19.1.jar:/home/usuario/.m2/repository/com/fasterxml/jackson/core/jackson-annotations/2.19.1/jackson-annotations-2.19.1.jar:/home/usuario/.m2/repository/com/fasterxml/jackson/core/jackson-core/2.19.1/jackson-core-2.19.1.jar:/home/usuario/.m2/repository/com/mysql/mysql-connector-j/9.2.0/mysql-connector-j-9.2.0.jar:/home/usuario/.m2/repository/org/springframework/boot/spring-boot-starter-test/3.5.3/spring-boot-starter-test-3.5.3.jar:/home/usuario/.m2/repository/org/springframework/boot/spring-boot-test/3.5.3/spring-boot-test-3.5.3.jar:/home/usuario/.m2/repository/org/springframework/boot/spring-boot-test-autoconfigure/3.5.3/spring-boot-test-autoconfigure-3.5.3.jar:/home/usuario/.m2/repository/com/jayway/jsonpath/json-path/2.9.0/json-path-2.9.0.jar:/home/usuario/.m2/repository/jakarta/xml/bind/jakarta.xml.bind-api/4.0.2/jakarta.xml.bind-api-4.0.2.jar:/home/usuario/.m2/repository/jakarta/activation/jakarta.activation-api/2.1.3/jakarta.activation-api-2.1.3.jar:/home/usuario/.m2/repository/net/minidev/json-smart/2.5.2/json-smart-2.5.2.jar:/home/usuario/.m2/repository/net/minidev/accessors-smart/2.5.2/accessors-smart-2.5.2.jar:/home/usuario/.m2/repository/org/ow2/asm/asm/9.7.1/asm-9.7.1.jar:/home/usuario/.m2/repository/org/assertj/assertj-core/3.27.3/assertj-core-3.27.3.jar:/home/usuario/.m2/repository/org/awaitility/awaitility/4.2.2/awaitility-4.2.2.jar:/home/usuario/.m2/repository/org/hamcrest/hamcrest/3.0/hamcrest-3.0.jar:/home/usuario/.m2/repository/org/junit/jupiter/junit-jupiter/5.12.2/junit-jupiter-5.12.2.jar:/home/usuario/.m2/repository/org/junit/jupiter/junit-jupiter-api/5.12.2/junit-jupiter-api-5.12.2.jar:/home/usuario/.m2/repository/org/opentest4j/opentest4j/1.3.0/opentest4j-1.3.0.jar:/home/usuario/.m2/repository/org/junit/platform/junit-platform-commons/1.12.2/junit-platform-commons-1.12.2.jar:/home/usuario/.m2/repository/org/apiguardian/apiguardian-api/1.1.2/apiguardian-api-1.1.2.jar:/home/usuario/.m2/repository/org/junit/jupiter/junit-jupiter-params/5.12.2/junit-jupiter-params-5.12.2.jar:/home/usuario/.m2/repository/org/junit/jupiter/junit-jupiter-engine/5.12.2/junit-jupiter-engine-5.12.2.jar:/home/usuario/.m2/repository/org/junit/platform/junit-platform-engine/1.12.2/junit-platform-engine-1.12.2.jar:/home/usuario/.m2/repository/org/mockito/mockito-core/5.17.0/mockito-core-5.17.0.jar:/home/usuario/.m2/repository/net/bytebuddy/byte-buddy-agent/1.17.6/byte-buddy-agent-1.17.6.jar:/home/usuario/.m2/repository/org/objenesis/objenesis/3.3/objenesis-3.3.jar:/home/usuario/.m2/repository/org/mockito/mockito-junit-jupiter/5.17.0/mockito-junit-jupiter-5.17.0.jar:/home/usuario/.m2/repository/org/skyscreamer/jsonassert/1.5.3/jsonassert-1.5.3.jar:/home/usuario/.m2/repository/com/vaadin/external/google/android-json/0.0.20131108.vaadin1/android-json-0.0.20131108.vaadin1.jar:/home/usuario/.m2/repository/org/springframework/spring-core/6.2.8/spring-core-6.2.8.jar:/home/usuario/.m2/repository/org/springframework/spring-jcl/6.2.8/spring-jcl-6.2.8.jar:/home/usuario/.m2/repository/org/springframework/spring-test/6.2.8/spring-test-6.2.8.jar:/home/usuario/.m2/repository/org/xmlunit/xmlunit-core/2.10.2/xmlunit-core-2.10.2.jar:/home/usuario/.m2/repository/org/springframework/security/spring-security-test/6.5.1/spring-security-test-6.5.1.jar:/home/usuario/.m2/repository/org/springframework/security/spring-security-core/6.5.1/spring-security-core-6.5.1.jar:/home/usuario/.m2/repository/org/springframework/security/spring-security-crypto/6.5.1/spring-security-crypto-6.5.1.jar:/home/usuario/.m2/repository/org/testcontainers/mysql/1.21.1/mysql-1.21.1.jar:/home/usuario/.m2/repository/org/testcontainers/jdbc/1.21.1/jdbc-1.21.1.jar:/home/usuario/.m2/repository/org/testcontainers/database-commons/1.21.1/database-commons-1.21.1.jar:/home/usuario/.m2/repository/org/testcontainers/junit-jupiter/1.21.1/junit-jupiter-1.21.1.jar:/home/usuario/.m2/repository/org/testcontainers/testcontainers/1.21.1/testcontainers-1.21.1.jar:/home/usuario/.m2/repository/junit/junit/4.13.2/junit-4.13.2.jar:/home/usuario/.m2/repository/org/hamcrest/hamcrest-core/3.0/hamcrest-core-3.0.jar:/home/usuario/.m2/repository/org/apache/commons/commons-compress/1.24.0/commons-compress-1.24.0.jar:/home/usuario/.m2/repository/org/rnorth/duct-tape/duct-tape/1.0.8/duct-tape-1.0.8.jar:/home/usuario/.m2/repository/org/jetbrains/annotations/17.0.0/annotations-17.0.0.jar:/home/usuario/.m2/repository/com/github/docker-java/docker-java-api/3.4.2/docker-java-api-3.4.2.jar:/home/usuario/.m2/repository/com/github/docker-java/docker-java-transport-zerodep/3.4.2/docker-java-transport-zerodep-3.4.2.jar:/home/usuario/.m2/repository/com/github/docker-java/docker-java-transport/3.4.2/docker-java-transport-3.4.2.jar:/home/usuario/.m2/repository/net/java/dev/jna/jna/5.13.0/jna-5.13.0.jar:/home/usuario/.m2/repository/org/springframework/boot/spring-boot-testcontainers/3.5.3/spring-boot-testcontainers-3.5.3.jar:/home/usuario/.m2/repository/org/springframework/boot/spring-boot-autoconfigure/3.5.3/spring-boot-autoconfigure-3.5.3.jar:"/>
    <property name="sun.cpu.endian" value="little"/>
    <property name="user.home" value="/home/usuario"/>
    <property name="user.language" value="en"/>
    <property name="java.specification.vendor" value="Oracle Corporation"/>
    <property name="java.version.date" value="2024-04-16"/>
    <property name="java.home" value="/usr/local/java"/>
    <property name="file.separator" value="/"/>
    <property name="basedir" value="/home/usuario/Asp/github repositorios/curso/CotizadorPcPartes/ms-seguridad"/>
    <property name="java.vm.compressedOopsMode" value="Zero based"/>
    <property name="line.separator" value="&#10;"/>
    <property name="java.vm.specification.vendor" value="Oracle Corporation"/>
    <property name="java.specification.name" value="Java Platform API Specification"/>
    <property name="FILE_LOG_CHARSET" value="UTF-8"/>
    <property name="java.awt.headless" value="true"/>
    <property name="surefire.real.class.path" value="/home/usuario/Asp/github repositorios/curso/CotizadorPcPartes/ms-seguridad/target/surefire/surefirebooter-20250702170946275_3.jar"/>
    <property name="sun.management.compiler" value="HotSpot 64-Bit Tiered Compilers"/>
    <property name="java.runtime.version" value="21.0.3+9-LTS"/>
    <property name="user.name" value="usuario"/>
    <property name="stdout.encoding" value="UTF-8"/>
    <property name="path.separator" value=":"/>
    <property name="os.version" value="6.11.0-29-generic"/>
    <property name="java.runtime.name" value="OpenJDK Runtime Environment"/>
    <property name="file.encoding" value="UTF-8"/>
    <property name="FILE_LOG_PATTERN" value="%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"/>
    <property name="java.vm.name" value="OpenJDK 64-Bit Server VM"/>
    <property name="java.vendor.version" value="Temurin-21.0.3+9"/>
    <property name="LOG_FILE" value="logs/seguridad-testing.log"/>
    <property name="localRepository" value="/home/usuario/.m2/repository"/>
    <property name="java.vendor.url.bug" value="https://github.com/adoptium/adoptium-support/issues"/>
    <property name="java.io.tmpdir" value="/tmp"/>
    <property name="com.zaxxer.hikari.pool_number" value="4"/>
    <property name="catalina.home" value="/tmp/tomcat.0.6636697425435454385"/>
    <property name="java.version" value="21.0.3"/>
    <property name="user.dir" value="/home/usuario/Asp/github repositorios/curso/CotizadorPcPartes/ms-seguridad"/>
    <property name="os.arch" value="amd64"/>
    <property name="java.vm.specification.name" value="Java Virtual Machine Specification"/>
    <property name="PID" value="103766"/>
    <property name="CONSOLE_LOG_CHARSET" value="UTF-8"/>
    <property name="catalina.base" value="/tmp/tomcat.0.1036930895070684057"/>
    <property name="native.encoding" value="UTF-8"/>
    <property name="java.library.path" value="/tmp/.mount_CursorVahEU1/usr/lib/:/tmp/.mount_CursorVahEU1/usr/lib32/:/tmp/.mount_CursorVahEU1/usr/lib64/:/tmp/.mount_CursorVahEU1/lib/:/tmp/.mount_CursorVahEU1/lib/i386-linux-gnu/:/tmp/.mount_CursorVahEU1/lib/x86_64-linux-gnu/:/tmp/.mount_CursorVahEU1/lib/aarch64-linux-gnu/:/tmp/.mount_CursorVahEU1/lib32/:/tmp/.mount_CursorVahEU1/lib64/::/usr/java/packages/lib:/usr/lib64:/lib64:/lib:/usr/lib"/>
    <property name="java.vm.info" value="mixed mode, sharing"/>
    <property name="stderr.encoding" value="UTF-8"/>
    <property name="java.vendor" value="Eclipse Adoptium"/>
    <property name="java.vm.version" value="21.0.3+9-LTS"/>
    <property name="sun.io.unicode.encoding" value="UnicodeLittle"/>
    <property name="java.class.version" value="65.0"/>
    <property name="CONSOLE_LOG_PATTERN" value="%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n"/>
    <property name="LOGGED_APPLICATION_NAME" value="[ms-seguridad-test] "/>
  </properties>
  <testcase name="shouldRejectExpiredTokens" classname="mx.com.qtx.seguridad.security.SpringSecurityConfigurationTest" time="0.034">
    <system-out><![CDATA[17:10:13.228 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [mx.com.qtx.seguridad.security.SpringSecurityConfigurationTest]: SpringSecurityConfigurationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.5.3)

17:10:13.311 [main] INFO  m.c.q.s.s.SpringSecurityConfigurationTest - Starting SpringSecurityConfigurationTest using Java 21.0.3 with PID 103766 (started by usuario in /home/usuario/Asp/github repositorios/curso/CotizadorPcPartes/ms-seguridad)
17:10:13.312 [main] DEBUG m.c.q.s.s.SpringSecurityConfigurationTest - Running with Spring Boot v3.5.3, Spring v6.2.8
17:10:13.312 [main] INFO  m.c.q.s.s.SpringSecurityConfigurationTest - The following 1 profile is active: "test"
17:10:13.591 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
17:10:13.601 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 8 ms. Found 3 JPA repository interfaces.
17:10:13.694 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-3"]
17:10:13.694 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
17:10:13.695 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
17:10:13.706 [main] INFO  o.a.c.c.C.[.[.[/seguridad/v1/api] - Initializing Spring embedded WebApplicationContext
17:10:13.748 [main] INFO  m.c.q.s.config.RsaKeyProvider - Generando nuevo par de llaves RSA de 2048 bits
17:10:13.815 [main] INFO  m.c.q.s.config.RsaKeyProvider - Par de llaves RSA generado exitosamente en Wed Jul 02 17:10:13 MST 2025
17:10:13.904 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
17:10:13.921 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
17:10:13.979 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
17:10:14.091 [main] DEBUG m.c.q.s.s.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
17:10:14.110 [main] INFO  m.c.q.s.service.KeyManagementService - Iniciando KeyManagementService...
17:10:14.110 [main] INFO  m.c.q.s.service.KeyManagementService - KeyManagementService inicializado exitosamente
17:10:14.110 [main] INFO  m.c.q.s.service.KeyManagementService - Estado de llaves: RSA Key Info - Algorithm: RSA, KeySize: 2048 bits, Generated: Wed Jul 02 17:10:13 MST 2025, Modulus Length: 2048
17:10:14.169 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
17:10:14.445 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-3"]
17:10:14.452 [main] INFO  m.c.q.s.s.SpringSecurityConfigurationTest - Started SpringSecurityConfigurationTest in 1.203 seconds (process running for 28.092)
17:10:14.464 [http-nio-auto-3-exec-1] INFO  o.a.c.c.C.[.[.[/seguridad/v1/api] - Initializing Spring DispatcherServlet 'dispatcherServlet'
17:10:14.475 [http-nio-auto-3-exec-1] DEBUG m.c.q.seguridad.service.AuthService - Token inválido: Unable to verify RS256 signature with JCA algorithm 'SHA256withRSA' using key {Sun RSA public key, 2048 bits
  params: null
  modulus: 21335014034216632959035464509119541779924136853342464315036159861680114899270260954268886949419092397542321261478317147415189443303784757224919721673179376811439753916546387530442114183914953156771183943028575612067620410070225608773272381757586080974729217556815059185281216883866937755435688862782810935979953097680310163342319762698898816910586763039379239756119721154778224984258949975887808936343523239934757205328724685895239175428276562456483929255088815256413642880317637895368131834096509808184403330024266384987531574996184356743323784800140120848181102194222892402523353887798376981025800100748971728794049
  public exponent: 65537}: Signature callback execution failed: Bad signature length: got 12 but was expecting 256
17:10:14.477 [http-nio-auto-3-exec-1] DEBUG m.c.q.s.s.JwtAuthenticationFilter - Token inválido o expirado para request: /seguridad/v1/api/auth/validate
17:10:14.479 [http-nio-auto-3-exec-1] WARN  m.c.q.s.security.JwtExceptionHandler - Error de autenticación para /seguridad/v1/api/auth/validate: Full authentication is required to access this resource
]]></system-out>
  </testcase>
  <testcase name="shouldIncludeXFrameOptionsHeader" classname="mx.com.qtx.seguridad.security.SpringSecurityConfigurationTest" time="0.018"/>
  <testcase name="shouldHandleAccessDeniedErrors" classname="mx.com.qtx.seguridad.security.SpringSecurityConfigurationTest" time="0.331">
    <system-out><![CDATA[17:10:14.531 [http-nio-auto-3-exec-3] INFO  m.c.q.seguridad.service.AuthService - Intento de autenticación para usuario: admin
17:10:14.534 [http-nio-auto-3-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.activo,
        u1_0.fecha_creacion,
        u1_0.fecha_modificacion,
        u1_0.password,
        u1_0.usuario 
    from
        usuario u1_0 
    where
        u1_0.usuario=? 
        and u1_0.activo=?
17:10:14.809 [http-nio-auto-3-exec-3] DEBUG org.hibernate.SQL - 
    /* SELECT
        ra 
    FROM
        RolAsignado ra 
    JOIN
        
    FETCH
        ra.rol r 
    WHERE
        ra.usuario.id = :usuarioId 
        AND ra.activo = true 
        AND r.activo = true */ select
            ra1_0.id_rol,
            ra1_0.id_usuario,
            ra1_0.activo,
            ra1_0.fecha_creacion,
            ra1_0.fecha_modificacion,
            r1_0.id,
            r1_0.activo,
            r1_0.fecha_creacion,
            r1_0.fecha_modificacion,
            r1_0.nombre 
        from
            rol_asignado ra1_0 
        join
            rol r1_0 
                on r1_0.id=ra1_0.id_rol 
        where
            ra1_0.id_usuario=? 
            and ra1_0.activo=1 
            and r1_0.activo=1
17:10:14.812 [http-nio-auto-3-exec-3] DEBUG m.c.qtx.seguridad.service.JwtService - Configuración JWT - accessTokenExpiration: 3600000 ms
17:10:14.812 [http-nio-auto-3-exec-3] DEBUG m.c.qtx.seguridad.service.JwtService - Token times - now: Wed Jul 02 17:10:14 MST 2025, expiration: Wed Jul 02 18:10:14 MST 2025
17:10:14.815 [http-nio-auto-3-exec-3] DEBUG m.c.qtx.seguridad.service.JwtService - Access token generado para usuario: admin con roles: [ADMIN]
17:10:14.816 [http-nio-auto-3-exec-3] DEBUG m.c.qtx.seguridad.service.JwtService - Refresh token generado para usuario: admin
17:10:14.817 [http-nio-auto-3-exec-3] INFO  m.c.q.seguridad.service.AuthService - Autenticación exitosa para usuario: admin con roles: [ADMIN]
17:10:14.827 [http-nio-auto-3-exec-4] DEBUG m.c.qtx.seguridad.service.JwtService - Token validado exitosamente para usuario: admin
17:10:14.828 [http-nio-auto-3-exec-4] DEBUG m.c.qtx.seguridad.service.JwtService - Token validado exitosamente para usuario: admin
17:10:14.830 [http-nio-auto-3-exec-4] DEBUG m.c.qtx.seguridad.service.JwtService - Token validado exitosamente para usuario: admin
17:10:14.831 [http-nio-auto-3-exec-4] DEBUG m.c.qtx.seguridad.service.JwtService - Token validado exitosamente para usuario: admin
17:10:14.831 [http-nio-auto-3-exec-4] DEBUG m.c.qtx.seguridad.service.JwtService - Token validado exitosamente para usuario: admin
17:10:14.832 [http-nio-auto-3-exec-4] DEBUG m.c.qtx.seguridad.service.JwtService - Token validado exitosamente para usuario: admin
17:10:14.832 [http-nio-auto-3-exec-4] DEBUG m.c.q.s.s.JwtAuthenticationFilter - Usuario autenticado: admin con roles: [ADMIN]
17:10:14.834 [http-nio-auto-3-exec-4] DEBUG m.c.qtx.seguridad.service.JwtService - Token validado exitosamente para usuario: admin
17:10:14.835 [http-nio-auto-3-exec-4] DEBUG m.c.qtx.seguridad.service.JwtService - Token validado exitosamente para usuario: admin
17:10:14.835 [http-nio-auto-3-exec-4] DEBUG m.c.qtx.seguridad.service.JwtService - Token validado exitosamente para usuario: admin
17:10:14.836 [http-nio-auto-3-exec-4] DEBUG m.c.qtx.seguridad.service.JwtService - Token validado exitosamente para usuario: admin
17:10:14.837 [http-nio-auto-3-exec-4] DEBUG m.c.qtx.seguridad.service.JwtService - Token validado exitosamente para usuario: admin
]]></system-out>
  </testcase>
  <testcase name="shouldConfigureCorsForPreflightRequests" classname="mx.com.qtx.seguridad.security.SpringSecurityConfigurationTest" time="0.019"/>
  <testcase name="shouldHandleAuthenticationExceptionsCorrectly" classname="mx.com.qtx.seguridad.security.SpringSecurityConfigurationTest" time="0.016">
    <system-out><![CDATA[17:10:14.874 [http-nio-auto-3-exec-6] ERROR m.c.qtx.seguridad.service.JwtService - Token JWT malformado: Invalid compact JWT string: Compact JWSs must contain exactly 2 period characters, and compact JWEs must contain exactly 4.  Found: 6
17:10:14.875 [http-nio-auto-3-exec-6] DEBUG m.c.q.seguridad.service.AuthService - Token inválido: Invalid compact JWT string: Compact JWSs must contain exactly 2 period characters, and compact JWEs must contain exactly 4.  Found: 6
17:10:14.876 [http-nio-auto-3-exec-6] DEBUG m.c.q.s.s.JwtAuthenticationFilter - Token inválido o expirado para request: /seguridad/v1/api/auth/validate
17:10:14.877 [http-nio-auto-3-exec-6] WARN  m.c.q.s.security.JwtExceptionHandler - Error de autenticación para /seguridad/v1/api/auth/validate: Full authentication is required to access this resource
]]></system-out>
  </testcase>
  <testcase name="shouldProcessValidBearerTokens" classname="mx.com.qtx.seguridad.security.SpringSecurityConfigurationTest" time="0.322">
    <system-out><![CDATA[17:10:14.891 [http-nio-auto-3-exec-7] INFO  m.c.q.seguridad.service.AuthService - Intento de autenticación para usuario: admin
17:10:14.893 [http-nio-auto-3-exec-7] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.activo,
        u1_0.fecha_creacion,
        u1_0.fecha_modificacion,
        u1_0.password,
        u1_0.usuario 
    from
        usuario u1_0 
    where
        u1_0.usuario=? 
        and u1_0.activo=?
17:10:15.180 [http-nio-auto-3-exec-7] DEBUG org.hibernate.SQL - 
    /* SELECT
        ra 
    FROM
        RolAsignado ra 
    JOIN
        
    FETCH
        ra.rol r 
    WHERE
        ra.usuario.id = :usuarioId 
        AND ra.activo = true 
        AND r.activo = true */ select
            ra1_0.id_rol,
            ra1_0.id_usuario,
            ra1_0.activo,
            ra1_0.fecha_creacion,
            ra1_0.fecha_modificacion,
            r1_0.id,
            r1_0.activo,
            r1_0.fecha_creacion,
            r1_0.fecha_modificacion,
            r1_0.nombre 
        from
            rol_asignado ra1_0 
        join
            rol r1_0 
                on r1_0.id=ra1_0.id_rol 
        where
            ra1_0.id_usuario=? 
            and ra1_0.activo=1 
            and r1_0.activo=1
17:10:15.182 [http-nio-auto-3-exec-7] DEBUG m.c.qtx.seguridad.service.JwtService - Configuración JWT - accessTokenExpiration: 3600000 ms
17:10:15.182 [http-nio-auto-3-exec-7] DEBUG m.c.qtx.seguridad.service.JwtService - Token times - now: Wed Jul 02 17:10:15 MST 2025, expiration: Wed Jul 02 18:10:15 MST 2025
17:10:15.184 [http-nio-auto-3-exec-7] DEBUG m.c.qtx.seguridad.service.JwtService - Access token generado para usuario: admin con roles: [ADMIN]
17:10:15.185 [http-nio-auto-3-exec-7] DEBUG m.c.qtx.seguridad.service.JwtService - Refresh token generado para usuario: admin
17:10:15.185 [http-nio-auto-3-exec-7] INFO  m.c.q.seguridad.service.AuthService - Autenticación exitosa para usuario: admin con roles: [ADMIN]
17:10:15.193 [http-nio-auto-3-exec-8] DEBUG m.c.qtx.seguridad.service.JwtService - Token validado exitosamente para usuario: admin
17:10:15.193 [http-nio-auto-3-exec-8] DEBUG m.c.qtx.seguridad.service.JwtService - Token validado exitosamente para usuario: admin
17:10:15.195 [http-nio-auto-3-exec-8] DEBUG m.c.qtx.seguridad.service.JwtService - Token validado exitosamente para usuario: admin
17:10:15.196 [http-nio-auto-3-exec-8] DEBUG m.c.qtx.seguridad.service.JwtService - Token validado exitosamente para usuario: admin
17:10:15.196 [http-nio-auto-3-exec-8] DEBUG m.c.qtx.seguridad.service.JwtService - Token validado exitosamente para usuario: admin
17:10:15.197 [http-nio-auto-3-exec-8] DEBUG m.c.qtx.seguridad.service.JwtService - Token validado exitosamente para usuario: admin
17:10:15.197 [http-nio-auto-3-exec-8] DEBUG m.c.q.s.s.JwtAuthenticationFilter - Usuario autenticado: admin con roles: [ADMIN]
17:10:15.198 [http-nio-auto-3-exec-8] DEBUG m.c.qtx.seguridad.service.JwtService - Token validado exitosamente para usuario: admin
17:10:15.199 [http-nio-auto-3-exec-8] DEBUG m.c.qtx.seguridad.service.JwtService - Token validado exitosamente para usuario: admin
17:10:15.199 [http-nio-auto-3-exec-8] DEBUG m.c.qtx.seguridad.service.JwtService - Token validado exitosamente para usuario: admin
17:10:15.200 [http-nio-auto-3-exec-8] DEBUG m.c.qtx.seguridad.service.JwtService - Token validado exitosamente para usuario: admin
17:10:15.200 [http-nio-auto-3-exec-8] DEBUG m.c.qtx.seguridad.service.JwtService - Token validado exitosamente para usuario: admin
]]></system-out>
  </testcase>
  <testcase name="shouldIncludeXContentTypeOptionsHeader" classname="mx.com.qtx.seguridad.security.SpringSecurityConfigurationTest" time="0.009"/>
  <testcase name="shouldValidateTokenSignatureAlgorithm" classname="mx.com.qtx.seguridad.security.SpringSecurityConfigurationTest" time="0.038">
    <system-out><![CDATA[17:10:15.226 [http-nio-auto-3-exec-10] ERROR m.c.qtx.seguridad.service.JwtService - Token JWT no soportado: The parsed JWT indicates it was signed with the 'HS256' signature algorithm, but the provided sun.security.rsa.RSAPublicKeyImpl key may not be used to verify HS256 signatures.  Because the specified key reflects a specific and expected algorithm, and the JWT does not reflect this algorithm, it is likely that the JWT was not expected and therefore should not be trusted.  Another possibility is that the parser was provided the incorrect signature verification key, but this cannot be assumed for security reasons.
17:10:15.226 [http-nio-auto-3-exec-10] DEBUG m.c.q.seguridad.service.AuthService - Token inválido: The parsed JWT indicates it was signed with the 'HS256' signature algorithm, but the provided sun.security.rsa.RSAPublicKeyImpl key may not be used to verify HS256 signatures.  Because the specified key reflects a specific and expected algorithm, and the JWT does not reflect this algorithm, it is likely that the JWT was not expected and therefore should not be trusted.  Another possibility is that the parser was provided the incorrect signature verification key, but this cannot be assumed for security reasons.
17:10:15.230 [http-nio-auto-3-exec-10] DEBUG m.c.q.s.s.JwtAuthenticationFilter - Token inválido o expirado para request: /seguridad/v1/api/auth/validate
17:10:15.231 [http-nio-auto-3-exec-10] WARN  m.c.q.s.security.JwtExceptionHandler - Error de autenticación para /seguridad/v1/api/auth/validate: Full authentication is required to access this resource
17:10:15.243 [http-nio-auto-3-exec-1] ERROR m.c.qtx.seguridad.service.JwtService - Token JWT no soportado: Unsecured JWSs (those with an 'alg' (Algorithm) header value of 'none') are disallowed by default as mandated by https://www.rfc-editor.org/rfc/rfc7518.html#section-3.6. If you wish to allow them to be parsed, call the JwtParserBuilder.unsecured() method, but please read the security considerations covered in that method's JavaDoc before doing so. Header: {alg=none, typ=JWT}
17:10:15.243 [http-nio-auto-3-exec-1] DEBUG m.c.q.seguridad.service.AuthService - Token inválido: Unsecured JWSs (those with an 'alg' (Algorithm) header value of 'none') are disallowed by default as mandated by https://www.rfc-editor.org/rfc/rfc7518.html#section-3.6. If you wish to allow them to be parsed, call the JwtParserBuilder.unsecured() method, but please read the security considerations covered in that method's JavaDoc before doing so. Header: {alg=none, typ=JWT}
17:10:15.245 [http-nio-auto-3-exec-1] DEBUG m.c.q.s.s.JwtAuthenticationFilter - Token inválido o expirado para request: /seguridad/v1/api/auth/validate
17:10:15.247 [http-nio-auto-3-exec-1] WARN  m.c.q.s.security.JwtExceptionHandler - Error de autenticación para /seguridad/v1/api/auth/validate: Full authentication is required to access this resource
]]></system-out>
  </testcase>
  <testcase name="shouldBeConfiguredAsStateless" classname="mx.com.qtx.seguridad.security.SpringSecurityConfigurationTest" time="0.618">
    <system-out><![CDATA[17:10:15.263 [http-nio-auto-3-exec-2] INFO  m.c.q.seguridad.service.AuthService - Intento de autenticación para usuario: admin
17:10:15.265 [http-nio-auto-3-exec-2] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.activo,
        u1_0.fecha_creacion,
        u1_0.fecha_modificacion,
        u1_0.password,
        u1_0.usuario 
    from
        usuario u1_0 
    where
        u1_0.usuario=? 
        and u1_0.activo=?
17:10:15.536 [http-nio-auto-3-exec-2] DEBUG org.hibernate.SQL - 
    /* SELECT
        ra 
    FROM
        RolAsignado ra 
    JOIN
        
    FETCH
        ra.rol r 
    WHERE
        ra.usuario.id = :usuarioId 
        AND ra.activo = true 
        AND r.activo = true */ select
            ra1_0.id_rol,
            ra1_0.id_usuario,
            ra1_0.activo,
            ra1_0.fecha_creacion,
            ra1_0.fecha_modificacion,
            r1_0.id,
            r1_0.activo,
            r1_0.fecha_creacion,
            r1_0.fecha_modificacion,
            r1_0.nombre 
        from
            rol_asignado ra1_0 
        join
            rol r1_0 
                on r1_0.id=ra1_0.id_rol 
        where
            ra1_0.id_usuario=? 
            and ra1_0.activo=1 
            and r1_0.activo=1
17:10:15.539 [http-nio-auto-3-exec-2] DEBUG m.c.qtx.seguridad.service.JwtService - Configuración JWT - accessTokenExpiration: 3600000 ms
17:10:15.539 [http-nio-auto-3-exec-2] DEBUG m.c.qtx.seguridad.service.JwtService - Token times - now: Wed Jul 02 17:10:15 MST 2025, expiration: Wed Jul 02 18:10:15 MST 2025
17:10:15.541 [http-nio-auto-3-exec-2] DEBUG m.c.qtx.seguridad.service.JwtService - Access token generado para usuario: admin con roles: [ADMIN]
17:10:15.543 [http-nio-auto-3-exec-2] DEBUG m.c.qtx.seguridad.service.JwtService - Refresh token generado para usuario: admin
17:10:15.543 [http-nio-auto-3-exec-2] INFO  m.c.q.seguridad.service.AuthService - Autenticación exitosa para usuario: admin con roles: [ADMIN]
17:10:15.559 [http-nio-auto-3-exec-3] INFO  m.c.q.seguridad.service.AuthService - Intento de autenticación para usuario: admin
17:10:15.560 [http-nio-auto-3-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.activo,
        u1_0.fecha_creacion,
        u1_0.fecha_modificacion,
        u1_0.password,
        u1_0.usuario 
    from
        usuario u1_0 
    where
        u1_0.usuario=? 
        and u1_0.activo=?
17:10:15.817 [http-nio-auto-3-exec-3] DEBUG org.hibernate.SQL - 
    /* SELECT
        ra 
    FROM
        RolAsignado ra 
    JOIN
        
    FETCH
        ra.rol r 
    WHERE
        ra.usuario.id = :usuarioId 
        AND ra.activo = true 
        AND r.activo = true */ select
            ra1_0.id_rol,
            ra1_0.id_usuario,
            ra1_0.activo,
            ra1_0.fecha_creacion,
            ra1_0.fecha_modificacion,
            r1_0.id,
            r1_0.activo,
            r1_0.fecha_creacion,
            r1_0.fecha_modificacion,
            r1_0.nombre 
        from
            rol_asignado ra1_0 
        join
            rol r1_0 
                on r1_0.id=ra1_0.id_rol 
        where
            ra1_0.id_usuario=? 
            and ra1_0.activo=1 
            and r1_0.activo=1
17:10:15.819 [http-nio-auto-3-exec-3] DEBUG m.c.qtx.seguridad.service.JwtService - Configuración JWT - accessTokenExpiration: 3600000 ms
17:10:15.820 [http-nio-auto-3-exec-3] DEBUG m.c.qtx.seguridad.service.JwtService - Token times - now: Wed Jul 02 17:10:15 MST 2025, expiration: Wed Jul 02 18:10:15 MST 2025
17:10:15.822 [http-nio-auto-3-exec-3] DEBUG m.c.qtx.seguridad.service.JwtService - Access token generado para usuario: admin con roles: [ADMIN]
17:10:15.824 [http-nio-auto-3-exec-3] DEBUG m.c.qtx.seguridad.service.JwtService - Refresh token generado para usuario: admin
17:10:15.824 [http-nio-auto-3-exec-3] INFO  m.c.q.seguridad.service.AuthService - Autenticación exitosa para usuario: admin con roles: [ADMIN]
17:10:15.832 [http-nio-auto-3-exec-4] DEBUG m.c.qtx.seguridad.service.JwtService - Token validado exitosamente para usuario: admin
17:10:15.833 [http-nio-auto-3-exec-4] DEBUG m.c.qtx.seguridad.service.JwtService - Token validado exitosamente para usuario: admin
17:10:15.835 [http-nio-auto-3-exec-4] DEBUG m.c.qtx.seguridad.service.JwtService - Token validado exitosamente para usuario: admin
17:10:15.835 [http-nio-auto-3-exec-4] DEBUG m.c.qtx.seguridad.service.JwtService - Token validado exitosamente para usuario: admin
17:10:15.836 [http-nio-auto-3-exec-4] DEBUG m.c.qtx.seguridad.service.JwtService - Token validado exitosamente para usuario: admin
17:10:15.836 [http-nio-auto-3-exec-4] DEBUG m.c.qtx.seguridad.service.JwtService - Token validado exitosamente para usuario: admin
17:10:15.836 [http-nio-auto-3-exec-4] DEBUG m.c.q.s.s.JwtAuthenticationFilter - Usuario autenticado: admin con roles: [ADMIN]
17:10:15.839 [http-nio-auto-3-exec-4] DEBUG m.c.qtx.seguridad.service.JwtService - Token validado exitosamente para usuario: admin
17:10:15.840 [http-nio-auto-3-exec-4] DEBUG m.c.qtx.seguridad.service.JwtService - Token validado exitosamente para usuario: admin
17:10:15.841 [http-nio-auto-3-exec-4] DEBUG m.c.qtx.seguridad.service.JwtService - Token validado exitosamente para usuario: admin
17:10:15.842 [http-nio-auto-3-exec-4] DEBUG m.c.qtx.seguridad.service.JwtService - Token validado exitosamente para usuario: admin
17:10:15.842 [http-nio-auto-3-exec-4] DEBUG m.c.qtx.seguridad.service.JwtService - Token validado exitosamente para usuario: admin
17:10:15.854 [http-nio-auto-3-exec-5] DEBUG m.c.qtx.seguridad.service.JwtService - Token validado exitosamente para usuario: admin
17:10:15.855 [http-nio-auto-3-exec-5] DEBUG m.c.qtx.seguridad.service.JwtService - Token validado exitosamente para usuario: admin
17:10:15.858 [http-nio-auto-3-exec-5] DEBUG m.c.qtx.seguridad.service.JwtService - Token validado exitosamente para usuario: admin
17:10:15.858 [http-nio-auto-3-exec-5] DEBUG m.c.qtx.seguridad.service.JwtService - Token validado exitosamente para usuario: admin
17:10:15.859 [http-nio-auto-3-exec-5] DEBUG m.c.qtx.seguridad.service.JwtService - Token validado exitosamente para usuario: admin
17:10:15.861 [http-nio-auto-3-exec-5] DEBUG m.c.qtx.seguridad.service.JwtService - Token validado exitosamente para usuario: admin
17:10:15.861 [http-nio-auto-3-exec-5] DEBUG m.c.q.s.s.JwtAuthenticationFilter - Usuario autenticado: admin con roles: [ADMIN]
17:10:15.863 [http-nio-auto-3-exec-5] DEBUG m.c.qtx.seguridad.service.JwtService - Token validado exitosamente para usuario: admin
17:10:15.863 [http-nio-auto-3-exec-5] DEBUG m.c.qtx.seguridad.service.JwtService - Token validado exitosamente para usuario: admin
17:10:15.864 [http-nio-auto-3-exec-5] DEBUG m.c.qtx.seguridad.service.JwtService - Token validado exitosamente para usuario: admin
17:10:15.865 [http-nio-auto-3-exec-5] DEBUG m.c.qtx.seguridad.service.JwtService - Token validado exitosamente para usuario: admin
17:10:15.867 [http-nio-auto-3-exec-5] DEBUG m.c.qtx.seguridad.service.JwtService - Token validado exitosamente para usuario: admin
]]></system-out>
  </testcase>
  <testcase name="shouldValidateContentTypeOnPostEndpoints" classname="mx.com.qtx.seguridad.security.SpringSecurityConfigurationTest" time="0.317">
    <system-out><![CDATA[17:10:15.879 [http-nio-auto-3-exec-6] WARN  o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.HttpMediaTypeNotSupportedException: Content-Type 'text/plain;charset=UTF-8' is not supported]
17:10:15.898 [http-nio-auto-3-exec-7] INFO  m.c.q.seguridad.service.AuthService - Intento de autenticación para usuario: admin
17:10:15.906 [http-nio-auto-3-exec-7] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.activo,
        u1_0.fecha_creacion,
        u1_0.fecha_modificacion,
        u1_0.password,
        u1_0.usuario 
    from
        usuario u1_0 
    where
        u1_0.usuario=? 
        and u1_0.activo=?
17:10:16.179 [http-nio-auto-3-exec-7] DEBUG org.hibernate.SQL - 
    /* SELECT
        ra 
    FROM
        RolAsignado ra 
    JOIN
        
    FETCH
        ra.rol r 
    WHERE
        ra.usuario.id = :usuarioId 
        AND ra.activo = true 
        AND r.activo = true */ select
            ra1_0.id_rol,
            ra1_0.id_usuario,
            ra1_0.activo,
            ra1_0.fecha_creacion,
            ra1_0.fecha_modificacion,
            r1_0.id,
            r1_0.activo,
            r1_0.fecha_creacion,
            r1_0.fecha_modificacion,
            r1_0.nombre 
        from
            rol_asignado ra1_0 
        join
            rol r1_0 
                on r1_0.id=ra1_0.id_rol 
        where
            ra1_0.id_usuario=? 
            and ra1_0.activo=1 
            and r1_0.activo=1
17:10:16.181 [http-nio-auto-3-exec-7] DEBUG m.c.qtx.seguridad.service.JwtService - Configuración JWT - accessTokenExpiration: 3600000 ms
17:10:16.182 [http-nio-auto-3-exec-7] DEBUG m.c.qtx.seguridad.service.JwtService - Token times - now: Wed Jul 02 17:10:16 MST 2025, expiration: Wed Jul 02 18:10:16 MST 2025
17:10:16.183 [http-nio-auto-3-exec-7] DEBUG m.c.qtx.seguridad.service.JwtService - Access token generado para usuario: admin con roles: [ADMIN]
17:10:16.185 [http-nio-auto-3-exec-7] DEBUG m.c.qtx.seguridad.service.JwtService - Refresh token generado para usuario: admin
17:10:16.185 [http-nio-auto-3-exec-7] INFO  m.c.q.seguridad.service.AuthService - Autenticación exitosa para usuario: admin con roles: [ADMIN]
]]></system-out>
  </testcase>
  <testcase name="shouldConfigurePublicVsProtectedEndpointsCorrectly" classname="mx.com.qtx.seguridad.security.SpringSecurityConfigurationTest" time="0.037">
    <system-out><![CDATA[17:10:16.196 [http-nio-auto-3-exec-8] WARN  o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<?> mx.com.qtx.seguridad.controller.AuthController.login(mx.com.qtx.seguridad.dto.LoginRequest) with 2 errors: [Field error in object 'loginRequest' on field 'usuario': rejected value [null]; codes [NotBlank.loginRequest.usuario,NotBlank.usuario,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [loginRequest.usuario,usuario]; arguments []; default message [usuario]]; default message [El nombre de usuario es obligatorio]] [Field error in object 'loginRequest' on field 'password': rejected value [null]; codes [NotBlank.loginRequest.password,NotBlank.password,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [loginRequest.password,password]; arguments []; default message [password]]; default message [La contraseña es obligatoria]] ]
17:10:16.214 [http-nio-auto-3-exec-10] WARN  m.c.q.s.security.JwtExceptionHandler - Error de autenticación para /seguridad/v1/api/auth/validate: Full authentication is required to access this resource
17:10:16.224 [http-nio-auto-3-exec-1] WARN  m.c.q.s.security.JwtExceptionHandler - Error de autenticación para /seguridad/v1/api/auth/token-ttl: Full authentication is required to access this resource
]]></system-out>
  </testcase>
  <testcase name="shouldValidateBearerTokenFormat" classname="mx.com.qtx.seguridad.security.SpringSecurityConfigurationTest" time="0.051">
    <system-out><![CDATA[17:10:16.233 [http-nio-auto-3-exec-2] WARN  m.c.q.s.security.JwtExceptionHandler - Error de autenticación para /seguridad/v1/api/auth/validate: Full authentication is required to access this resource
17:10:16.239 [http-nio-auto-3-exec-3] WARN  m.c.q.s.security.JwtExceptionHandler - Error de autenticación para /seguridad/v1/api/auth/validate: Full authentication is required to access this resource
17:10:16.245 [http-nio-auto-3-exec-4] WARN  m.c.q.s.security.JwtExceptionHandler - Error de autenticación para /seguridad/v1/api/auth/validate: Full authentication is required to access this resource
17:10:16.255 [http-nio-auto-3-exec-5] WARN  m.c.q.s.security.JwtExceptionHandler - Error de autenticación para /seguridad/v1/api/auth/validate: Full authentication is required to access this resource
17:10:16.261 [http-nio-auto-3-exec-6] WARN  m.c.q.s.security.JwtExceptionHandler - Error de autenticación para /seguridad/v1/api/auth/validate: Full authentication is required to access this resource
17:10:16.271 [http-nio-auto-3-exec-7] WARN  m.c.q.s.security.JwtExceptionHandler - Error de autenticación para /seguridad/v1/api/auth/validate: Full authentication is required to access this resource
]]></system-out>
  </testcase>
  <testcase name="shouldIncludeStrictTransportSecurityHeader" classname="mx.com.qtx.seguridad.security.SpringSecurityConfigurationTest" time="0.014"/>
  <testcase name="shouldIncludeCorsHeadersInActualResponses" classname="mx.com.qtx.seguridad.security.SpringSecurityConfigurationTest" time="0.31">
    <system-out><![CDATA[17:10:16.307 [http-nio-auto-3-exec-9] INFO  m.c.q.seguridad.service.AuthService - Intento de autenticación para usuario: admin
17:10:16.310 [http-nio-auto-3-exec-9] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.activo,
        u1_0.fecha_creacion,
        u1_0.fecha_modificacion,
        u1_0.password,
        u1_0.usuario 
    from
        usuario u1_0 
    where
        u1_0.usuario=? 
        and u1_0.activo=?
17:10:16.595 [http-nio-auto-3-exec-9] DEBUG org.hibernate.SQL - 
    /* SELECT
        ra 
    FROM
        RolAsignado ra 
    JOIN
        
    FETCH
        ra.rol r 
    WHERE
        ra.usuario.id = :usuarioId 
        AND ra.activo = true 
        AND r.activo = true */ select
            ra1_0.id_rol,
            ra1_0.id_usuario,
            ra1_0.activo,
            ra1_0.fecha_creacion,
            ra1_0.fecha_modificacion,
            r1_0.id,
            r1_0.activo,
            r1_0.fecha_creacion,
            r1_0.fecha_modificacion,
            r1_0.nombre 
        from
            rol_asignado ra1_0 
        join
            rol r1_0 
                on r1_0.id=ra1_0.id_rol 
        where
            ra1_0.id_usuario=? 
            and ra1_0.activo=1 
            and r1_0.activo=1
17:10:16.597 [http-nio-auto-3-exec-9] DEBUG m.c.qtx.seguridad.service.JwtService - Configuración JWT - accessTokenExpiration: 3600000 ms
17:10:16.597 [http-nio-auto-3-exec-9] DEBUG m.c.qtx.seguridad.service.JwtService - Token times - now: Wed Jul 02 17:10:16 MST 2025, expiration: Wed Jul 02 18:10:16 MST 2025
17:10:16.599 [http-nio-auto-3-exec-9] DEBUG m.c.qtx.seguridad.service.JwtService - Access token generado para usuario: admin con roles: [ADMIN]
17:10:16.601 [http-nio-auto-3-exec-9] DEBUG m.c.qtx.seguridad.service.JwtService - Refresh token generado para usuario: admin
17:10:16.601 [http-nio-auto-3-exec-9] INFO  m.c.q.seguridad.service.AuthService - Autenticación exitosa para usuario: admin con roles: [ADMIN]
]]></system-out>
  </testcase>
  <testcase name="shouldAllowOnlyAppropriateHttpMethodsPerEndpoint" classname="mx.com.qtx.seguridad.security.SpringSecurityConfigurationTest" time="0.03">
    <system-out><![CDATA[17:10:16.612 [http-nio-auto-3-exec-10] WARN  m.c.q.s.security.JwtExceptionHandler - Error de autenticación para /seguridad/v1/api/auth/login: Full authentication is required to access this resource
17:10:16.620 [http-nio-auto-3-exec-1] WARN  m.c.q.s.security.JwtExceptionHandler - Error de autenticación para /seguridad/v1/api/auth/login: Full authentication is required to access this resource
17:10:16.627 [http-nio-auto-3-exec-2] WARN  m.c.q.s.security.JwtExceptionHandler - Error de autenticación para /seguridad/v1/api/auth/validate: Full authentication is required to access this resource
17:10:16.632 [http-nio-auto-3-exec-3] WARN  m.c.q.s.security.JwtExceptionHandler - Error de autenticación para /seguridad/v1/api/auth/health: Full authentication is required to access this resource
]]></system-out>
  </testcase>
  <testcase name="shouldAllowAccessToPublicEndpointsWithoutToken" classname="mx.com.qtx.seguridad.security.SpringSecurityConfigurationTest" time="0.01"/>
  <testcase name="shouldApplyJwtFilterOnProtectedEndpoints" classname="mx.com.qtx.seguridad.security.SpringSecurityConfigurationTest" time="0.014">
    <system-out><![CDATA[17:10:16.655 [http-nio-auto-3-exec-5] WARN  m.c.q.s.security.JwtExceptionHandler - Error de autenticación para /seguridad/v1/api/auth/validate: Full authentication is required to access this resource
17:10:16.659 [http-nio-auto-3-exec-6] WARN  m.c.q.s.security.JwtExceptionHandler - Error de autenticación para /seguridad/v1/api/auth/token-ttl: Full authentication is required to access this resource
]]></system-out>
  </testcase>
  <testcase name="shouldIncludeXXssProtectionHeader" classname="mx.com.qtx.seguridad.security.SpringSecurityConfigurationTest" time="0.012"/>
</testsuite>