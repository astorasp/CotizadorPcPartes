# Configuración para Testing con TestContainers MySQL 8.4.4
# TestContainers will provide the datasource automatically via @ServiceConnection
# No need to configure spring.datasource.* properties manually

spring:
  application:
    name: ms-seguridad-test
    
  # JPA/Hibernate Configuration  
  jpa:
    hibernate:
      ddl-auto: none # Scripts manejados por TestContainers
    show-sql: false
    properties:
      hibernate:
        format_sql: true
        dialect: org.hibernate.dialect.MySQLDialect
        
  # SQL initialization
  sql:
    init:
      mode: never # Scripts cargados vía withInitScripts()
      
  # Test specific settings
  test:
    database:
      replace: none

# Configuración del servidor
server:
  port: 0 # Puerto aleatorio para tests

# Configuración JWT para testing
jwt:
  access-token:
    expiration: 3600000  # 1 hora para tests (evitar expiración durante ejecución)
  refresh-token:
    expiration: 7200000  # 2 horas para tests
  algorithm: RS256

# Configuración de logging para tests
logging:
  level:
    mx.com.qtx.seguridad: DEBUG
    org.springframework.security: WARN
    org.hibernate: WARN
    org.testcontainers: INFO
    com.zaxxer.hikari: WARN
  pattern:
    console: "%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n"
  file:
    name: logs/seguridad-testing.log

# Configuración específica para TestContainers
management:
  endpoints:
    enabled-by-default: false
  endpoint:
    health:
      enabled: true
      show-details: always