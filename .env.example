# =================================================================
# CONFIGURACIÓN DE ENTORNO PARA DOCKER COMPOSE
# =================================================================
# IMPORTANTE: Copia este archivo a .env y modifica los valores según tu entorno
# Comando: cp .env.example .env

# =================================================================
# BASE DE DATOS MYSQL - COTIZADOR
# =================================================================
MYSQL_ROOT_PASSWORD=root_password_change_me
MYSQL_COTIZADOR_DATABASE=cotizador
MYSQL_COTIZADOR_USER=cotizador_user
MYSQL_COTIZADOR_PASSWORD=cotizador_pass_change_me

# =================================================================
# BASE DE DATOS MYSQL - SEGURIDAD  
# =================================================================
MYSQL_SEGURIDAD_ROOT_PASSWORD=seguridad_root_pass_change_me
MYSQL_SEGURIDAD_DATABASE=seguridad
MYSQL_SEGURIDAD_USER=seguridad_user
MYSQL_SEGURIDAD_PASSWORD=seguridad_pass_change_me

# =================================================================
# CREDENCIALES DE SEGURIDAD - MICROSERVICIOS
# =================================================================
SECURITY_USERNAME=admin
SECURITY_PASSWORD=admin123_change_me

# =================================================================
# CONFIGURACIÓN JWT
# =================================================================
# Duración de tokens en milisegundos
JWT_ACCESS_TOKEN_DURATION=600000
JWT_REFRESH_TOKEN_DURATION=7200000
JWT_ISSUER=ms-seguridad

# Configuración de cache JWKS
JWT_CACHE_TIMEOUT_MS=300000
JWT_JWKS_REFRESH_INTERVAL_MS=300000
JWT_JWKS_MAX_RETRIES=5
JWT_JWKS_INITIAL_DELAY_MS=15000

# Timeouts de conexión (milisegundos)
JWT_MS_SEGURIDAD_TIMEOUT=15000
JWT_MS_SEGURIDAD_CONNECT_TIMEOUT=10000

# Configuración de rotación reactiva de llaves JWT
JWT_KEY_ROTATION_ENABLED=true
JWT_SECURITY_ALERT_THRESHOLD=3
JWT_LOG_ROTATION_EVENTS=true
JWT_CLEANUP_OLD_KEYS=true

# Configuración de rate limiting para endpoint JWKS
JWT_RATE_LIMITING_ENABLED=true
JWT_MAX_REQUESTS_PER_MINUTE=60
JWT_MAX_REQUESTS_PER_HOUR=1000

# =================================================================
# CONFIGURACIÓN DE RED Y PUERTOS
# =================================================================
# Puertos externos (accesibles desde el host)
COTIZADOR_PORT=8080
SEGURIDAD_PORT=8081
SEGURIDAD_MANAGEMENT_PORT=8091
MYSQL_COTIZADOR_PORT=3306
MYSQL_SEGURIDAD_PORT=3307

# =================================================================
# CONFIGURACIÓN JVM
# =================================================================
# Memoria para ms-cotizador
COTIZADOR_JAVA_OPTS=-Xmx1g -Xms512m -XX:+UseG1GC -XX:MaxGCPauseMillis=200

# Memoria para ms-seguridad  
SEGURIDAD_JAVA_OPTS=-Xmx512m -Xms256m -XX:+UseG1GC -XX:+UseStringDeduplication

# =================================================================
# CONFIGURACIÓN DE DESARROLLO/PRODUCCIÓN
# =================================================================
# Perfil Spring Boot activo
SPRING_PROFILES_ACTIVE=docker

# Configuración de logs
LOG_LEVEL_ROOT=INFO
LOG_LEVEL_SECURITY=DEBUG
LOG_LEVEL_COTIZADOR=INFO

# =================================================================
# NOTAS DE SEGURIDAD
# =================================================================
# 1. NUNCA commitees el archivo .env al repositorio
# 2. Cambia TODAS las contraseñas por defecto antes de usar en producción
# 3. Usa contraseñas fuertes (mínimo 12 caracteres, mayúsculas, minúsculas, números, símbolos)
# 4. En producción, considera usar secrets de Docker Swarm o Kubernetes
# 5. Rota las credenciales regularmente